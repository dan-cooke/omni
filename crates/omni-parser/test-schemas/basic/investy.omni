// Here is our first basic Omni schema
// In this schema we will be defining an
// InvestmentService
// 	This service will allow users to create portfolios,
// 	And populate them with stock holdings
// There will be 3 main resources users will be able to access
// - Portfolios
// - Portfolio Holdings
// - Portfolio Transactions

import WithId from './with-id'

service InvestmentService {

	version: "2.0.0",

	resource Portfolio extends WithId {
		name: String,
		holdings: [String],
		owner: String,
	}

	resource Portfolio > Holding extends WithId {
		@id
		id: String,
		symbol: String,
		name: String,
		quantity: Float,
		cost_basis: Float
	}

	resource Portfolio > Transaction extends WithId {
		name: String,
		value: Float,
		date: ISODate,
	}


	// As well as input and output types
	// Inputs can be defined at the service level
	input CreatePortfolioInput for Portfolio {
		$name
	}




	create CreatePortfolio for Portfolio {
		input: CreatePortfolioInput

		// This could also have been defined as an output
		// at the module level
		output: {
			created_at: Timestamp,
			$Portfolio.name
		}


	}

	list GetTransactions for Portfolio > Transaction {
		input: {
			$Portfolio.id,
		}
		output: [Transaction]
	}

	read GetPortfolioHolding for Portfolio > Holding {
		input: {
			$Portfolio.id,
			$Holding.id,

		}
		output: Holding

	}

	list SearchPortfolioHoldings for Portfolio > Holding {
		input: {
			$Portfolio.id,
			@required
			query: String

		}
		output: [Holding]

	}
}



